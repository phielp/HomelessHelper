<html>
<head>
	<script>
		function previewFile() {
		     var preview = document.querySelector('img');
		     var file    = document.querySelector('input[type=file]').files[0];
		     var reader  = new FileReader();
		
		     reader.onloadend = function () {
		         preview.src = reader.result;
		     }
		
		     if (file) {
		         reader.readAsDataURL(file);
		     } else {
		         preview.src = "";
		     }
		}
		
		function createRequest() {
			var requestType;
			if(document.getElementById('Food').checked) {
				requestType = document.getElementById("Food").value;
			} 
			else if (document.getElementById('Clothes').checked) {
				requestType = document.getElementById("Clothes").value;
			}
			else {
				requestType = document.getElementById("Other").value;
			}
			var description = document.getElementById("description").value;
			var image = document.getElementById("image").value;
				
			var newRequest = '{"inNeedOf":"'+requestType+'", "description":"'+description+'", "photo":"'+image+'"}';
			
			window.alert(typeof image);
			window.alert(image);
			
			var xhttp = new XMLHttpRequest();
			
			xhttp.onreadystatechange = function() {
				if (this.readyState == 4 && this.status == 200) {

				}
			};
      		xhttp.open("POST", "http://localhost:8080/createRequest");
			xhttp.setRequestHeader("Content-type", "application/json");
			xhttp.send(newRequest);
		}
	</script>
<body>
	CREATE REQUEST:
	<form>
		<input type="radio" id="Food" name="rate" value="FOOD" checked>VOEDSEL<br>
		<input type="radio" id="Clothes" name="rate" value="CLOTHES">KLEDING<br>
		<input type="radio" id="Other" name="rate" value="OTHER">OVERIG<br>
	</form>
	<br>
	<form action="/action_page.php">
		<textarea id="description" rows="10" cols="30" placeholder="Omschrijving benodigheden"></textarea>
		<br>
	</form>
	
	<input type="file" id="image" onchange="previewFile()"><br>
	<img src="" height="200" alt="Image preview...">
	
	<button type="button" id="makeRequest" onclick="createRequest()" >Plaats Aanvraag</button>
</body>
</head>
</html>